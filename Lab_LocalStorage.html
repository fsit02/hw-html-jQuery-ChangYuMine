<!DOCTYPE html>
<html>
	
<head>
	
<meta charset="UTF-8">

<title>LocalStorage Lab</title>

<link rel="stylesheet" href="work.css">

<script src="jquery-1.9.1.min.js"></script>

</head>

<body>

	<H1>實作 HTML5 的 LocalStorage 功能</H1>
	
	<p>輸入表單資料，不要按下「Send」送出，關閉瀏覽器，然後重新回到本頁，自動回復先前輸入的內容。</p>

	<form method="post" action="http://exec.hostzi.com/echo.php">

		<fieldset>
			
			<legend>Contact Details</legend>
			
			<ol>
				<li><label for="txtName">Name:</label> <input id="txtName"
				
					name="txtName" type="text" class="formFields"/></li>
					
				<li><label for="txtEmail">Email address:</label> <input
				
					id="txtEmail" name="txtEmail" type="text" class="formFields" /></li>
					
				<li><label for="txtPhone">Telephone:</label> <input
				
					id="txtPhone" name="txtPhone" type="text" class="formFields" /></li>
					
			</ol>

			<input id="btnSubmit" name="btnSubmit" type="submit" class="submit"
			
				value="Send" />

		</fieldset>

	</form>

<span id="test"></span>

<script>

	function doChange() {
		
		// $("#test").html(this.name + ":" + this.value + "<br>");
		
		localStorage.setItem(this.name, this.value);
		
	}
	
	$("#txtName").keyup(doChange);
	
	$("#txtEmail").keyup(doChange);
	
	$("#txtPhone").keyup(doChange);
	// jQuery Event Methods
	
		function readAndShow() {
		
		if (localStorage["txtName"])
		
			$("#txtName").val(localStorage["txtName"]);
			
		if (localStorage["txtEmail"])
		
			$("#txtEmail").val(localStorage["txtEmail"]);
			
		if (localStorage["txtPhone"])
		
			$("#txtPhone").val(localStorage["txtPhone"]);
			
	 }
	 
	 $("document").ready(readAndShow);
	 
	 $("form").submit(function(){
	 	
	 	localStorage.clear();
	 	
	 });
	
</script>

</body>

</html>
